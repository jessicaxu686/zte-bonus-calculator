<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZTE-奖金最优分配计税计算器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <style>
        .highlight {
            font-weight: bold;
            color: #e53935;
        }
        .critical-point {
            background-color: #ffebee;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        .tax-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .tax-table th, .tax-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .tax-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2d3748;
        }
        .tax-table tr:nth-child(even) {
            background-color: #fafafa;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center p-4">
    <div class="bg-white p-6 md:p-8 rounded-lg shadow-md w-full max-w-4xl">
        <div class="flex items-center justify-center mb-6">
            <i class="fas fa-calculator text-blue-500 text-3xl mr-3"></i>
            <h1 class="text-2xl font-bold text-center text-gray-800">ZTE-一次性奖金最优提取测算计算器</h1>
        </div>
        
<!-- 使用说明 -->
<div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-lg shadow-sm">
    <h2 class="text-lg font-bold text-blue-700 mb-3 flex items-center">
        <i class="fas fa-info-circle mr-2 text-blue-600"></i>使用说明
    </h2>
    <ul class="list-disc pl-5 space-y-2 text-sm text-gray-700">
        <!-- 政策说明 -->
        <li class="flex items-start">
            <i class="fas fa-file-invoice-dollar mt-1 mr-2 text-blue-400 text-xs"></i>
            <span>计算结果仅供参考，实际报税请以税务机关核定为准</span>
        </li>
        
        <li class="flex items-start">
            <i class="fas fa-calendar-check mt-1 mr-2 text-blue-400 text-xs"></i>
            <span>全年一次性奖金单独计税政策延续至<span class="highlight font-medium">2027年12月31日</span></span>
        </li>
        
        <!-- 公司特别提醒 -->
        <li class="flex items-start">
            <i class="fas fa-building mt-1 mr-2 text-blue-400 text-xs"></i>
            <span>公司当年全年一次性奖金提取方式使用截止日期：<span class="highlight font-medium">当年12月2日</span></span>
        </li>
        
        <!-- 数据来源说明 -->
        <li class="flex items-start">
            <i class="fas fa-database mt-1 mr-2 text-blue-400 text-xs"></i>
            <span>累计扣除数据来源参考：登录个人所得税APP，①进入"收入纳税明细"，②选择最新年度1月工资薪金，③点击"查看税款计算"获取数据，④分别乘以12得到年度累计数据 (请注意各地封顶值!)                  
            </span>
        </li>
        
        <!-- 新增说明 -->
        <li class="flex items-start">
            <i class="fas fa-lightbulb mt-1 mr-2 text-blue-400 text-xs"></i>
            <span>此工具根据需要提取的奖金总数进行一次性提取的建议，可以根据综合所得税率表临界值决定是否全部提取</span>
        </li>
        
        <!-- 版本信息 -->
        <li class="pt-2 mt-2 border-t border-blue-100 flex justify-between">
            <span class="text-xs text-gray-500 flex items-center">
                <i class="fas fa-code-branch mr-1"></i>
                <span>版本号：<span class="highlight">V2.0</span></span>
            </span>
            <span class="text-xs text-gray-500 flex items-center">
                <i class="far fa-calendar-alt mr-1"></i>
                <span>更新日期：<span class="highlight">2025年12月10日</span></span>
            </span>
            <span class="text-xs text-gray-500 flex items-center">
                <i class="fas fa-user-tie mr-1"></i>
                <span>联系人：<span class="highlight">徐晓芳 00049686</span></span>
            </span>
        </li>
    </ul>
</div>
        <!-- 输入表单 -->
        <div class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="salaryAllowance" class="block text-sm font-medium text-gray-700">
                        <i class="fas fa-money-bill-wave mr-1 text-green-500"></i>全年工资津贴预估（元）
                    </label>
                    <p class="text-xs text-gray-500 mb-1">包括全年工资、津贴，额外考虑调薪变化</p>
                    <input type="number" id="salaryAllowance" placeholder="例：220000" 
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
                <div>
                    <label for="extractedBonus" class="block text-sm font-medium text-gray-700">
                        <i class="fas fa-coins mr-1 text-yellow-500"></i>已经提取奖金（元）
                    </label>
                    <p class="text-xs text-gray-500 mb-1">本年度已提取的奖金金额</p>
                    <input type="number" id="extractedBonus" placeholder="例：20000" value="0"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
            </div>
            <div>
                <label for="totalBonus" class="block text-sm font-medium text-gray-700">
                    <i class="fas fa-gift mr-1 text-red-500"></i>待提取奖金总额（元）
                </label>
                <input type="number" id="totalBonus" placeholder="例：80000" 
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
            </div>
            <div>
                <label for="totalIncome" class="block text-sm font-medium text-gray-700">
                    <i class="fas fa-money-bill-alt mr-1 text-indigo-500"></i>全年总收入预估（元）
                </label>
                <p class="text-xs text-gray-500 mb-1">自动计算，等于全年工资津贴预估加上已提取奖金和待提取奖金总额</p>
                <input type="number" id="totalIncome" placeholder="自动计算" readonly
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm bg-gray-100">
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="basicDeduction" class="block text-sm font-medium text-gray-700">
                        <i class="fas fa-home mr-1 text-purple-500"></i>全年基本减除费用（元）
                    </label>
                    <input type="number" id="basicDeduction" value="60000" readonly 
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm bg-gray-100">
                </div>
                <div>
                    <label for="specialDeduction" class="block text-sm font-medium text-gray-700">
                        <i class="fas fa-shield-alt mr-1 text-yellow-500"></i>专项扣除（元）
                    </label>
                    <p class="text-xs text-gray-500 mb-1">全年累计社保公积金，计算需考虑各地上限</p>
                    <input type="number" id="specialDeduction" placeholder="例：40000" value="0" 
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="additionalDeduction" class="block text-sm font-medium text-gray-700">
                        <i class="fas fa-child mr-1 text-teal-500"></i>专项附加扣除（元）
                    </label>
                    <p class="text-xs text-gray-500 mb-1">包括子女教育、继续教育、大病医疗、住房贷款利息、住房租金、赡养老人</p>
                    <input type="number" id="additionalDeduction" placeholder="例：24000" value="0" 
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
                <div>
                    <label for="otherDeduction" class="block text-sm font-medium text-gray-700">
                        <i class="fas fa-hand-holding-heart mr-1 text-pink-500"></i>其他扣除项（元）
                    </label>
                    <p class="text-xs text-gray-500 mb-1">捐款额+抵税项+个人养老金</p>
                    <input type="number" id="otherDeduction" placeholder="例：2000" value="0" 
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
            </div>
        </div>
        <button onclick="calculateOptimalSplit()" 
            class="w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
            <i class="fas fa-calculator mr-2"></i>计算最优分配方案
        </button>
        <!-- 计算结果 -->
        <div id="result" class="mt-6 bg-gray-50 p-6 rounded-md shadow-sm hidden">
            <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-chart-pie mr-2 text-blue-500"></i>最优分配方案
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="bg-white p-4 rounded-md shadow-sm border border-blue-100">
                    <h3 class="text-md font-bold text-gray-700 mb-2 flex items-center">
                        <i class="fas fa-money-check-alt mr-2 text-green-500"></i>推荐一次性提取奖金
                    </h3>
                    <p class="mb-1">金额：<span id="optimalBonus" class="highlight text-xl">0</span> 元</p>
                    <p class="mb-1">适用税率：<span id="bonusTaxRate" class="text-orange-500 font-medium">0%</span></p>
                    <p class="mb-1">速算扣除数：<span id="bonusTaxDeduction" class="text-orange-500 font-medium">0</span> 元</p>
                    <p>税额：<span id="bonusTax" class="text-red-500">0</span> 元</p>
                </div>
                <div class="bg-white p-4 rounded-md shadow-sm border border-blue-100">
                    <h3 class="text-md font-bold text-gray-700 mb-2 flex items-center">
                        <i class="fas fa-hand-holding-usd mr-2 text-purple-500"></i>推荐随工资提取奖金
                    </h3>
                    <p class="mb-1">推荐随工资提取奖金：<span id="optimalSalaryBonus" class="highlight text-xl">0</span> 元</p>
                    <p class="mb-1">工资部分应纳税所得额：<span id="salaryTaxableIncome" class="text-orange-500 font-medium">0</span> 元</p>
                    <p class="mb-1">合并后适用税率：<span id="combinedTaxRate" class="text-orange-500 font-medium">0%</span></p>
                    <p>税额：<span id="salaryBonusTax" class="text-red-500">0</span> 元</p>
                </div>
            </div>
            <table class="w-full mt-4 border-collapse">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="px-4 py-2 border text-left">项目</th>
                        <th class="px-4 py-2 border text-left">金额（元）</th>
                        <th class="px-4 py-2 border text-left">备注</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="px-4 py-2 border">工资部分应纳税所得额</td>
                        <td class="px-4 py-2 border" id="salaryTaxableIncomeTable">0.00</td>
                        <td class="px-4 py-2 border">不含奖金部分</td>
                    </tr>
                    <tr class="bg-gray-50">
                        <td class="px-4 py-2 border">合并后全年应纳税所得额合计</td>
                        <td class="px-4 py-2 border font-medium" id="totalTaxableIncome">0.00</td>
                        <td class="px-4 py-2 border">工资+随工资提取奖金</td>
                    </tr>
                    <tr>
                        <td class="px-4 py-2 border">工资部分基础税额</td>
                        <td class="px-4 py-2 border" id="salaryTax">0.00</td>
                        <td class="px-4 py-2 border">不含奖金部分</td>
                    </tr>
                    <tr class="bg-gray-50">
                        <td class="px-4 py-2 border font-semibold">总税额（最优方案）</td>
                        <td class="px-4 py-2 border font-semibold" id="totalTax">0.00</td>
                        <td class="px-4 py-2 border">一次性奖金税+合并部分税</td>
                    </tr>
                    <tr>
                        <td class="px-4 py-2 border">比全部单独计税节省</td>
                        <td class="px-4 py-2 border text-green-600" id="savingSeparate">0.00 元</td>
                        <td class="px-4 py-2 border">最优方案 vs 全部单独计税</td>
                    </tr>
                    <tr class="bg-gray-50">
                        <td class="px-4 py-2 border">比全部合并计税节省</td>
                        <td class="px-4 py-2 border text-green-600" id="savingCombined">0.00 元</td>
                        <td class="px-4 py-2 border">最优方案 vs 全部合并计税</td>
                    </tr>
                </tbody>
            </table>
            <!-- 优化建议 -->
            <div class="bg-green-50 border-l-4 border-green-500 p-4 mt-6 rounded-md">
                <h3 class="text-md font-bold text-green-700 mb-2 flex items-center">
                    <i class="fas fa-lightbulb mr-2"></i>优化建议
                </h3>
                <p id="recommendation" class="font-medium"></p>
                <p id="explanation" class="text-sm mt-1"></p>
            </div>
            <!-- 注意事项 -->
            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mt-6 rounded-md">
                <h3 class="text-md font-bold text-yellow-700 mb-2 flex items-center">
                    <i class="fas fa-exclamation-triangle mr-2"></i>重要注意事项
                </h3>
                <div class="space-y-2 text-sm">
                    <p><strong>临界点警示：</strong>年终奖在<span class="critical-point">3.6万</span>、<span class="critical-point">14.4万</span>、<span class="critical-point">30万</span>等临界点时，多发1元可能多缴数千元税：</p>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>36,000元 → 税额1,080元；36,001元 → 税额3,390.1元（多缴2,310.1元）</li>
                        <li>144,000元 → 税额14,190元；144,001元 → 税额27,390.2元（多缴13,200.2元）</li>
                    </ul>
                    <p><strong>汇算清缴：</strong>次年3月1日至6月30日可通过个人所得税APP重新选择计税方式</p>
                    <p class="text-red-500 font-medium"><i class="fas fa-exclamation-circle mr-1"></i>计算结果仅供参考，实际报税请以税务机关核定为准</p>
                </div>
            </div>
            <!-- 税率表区域 -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-table mr-2 text-blue-500"></i>计税税率表（2025年执行标准）
                </h3>
                
                <!-- 全年一次性奖金单独计税税率表 -->
                <div class="mb-8">
                    <h4 class="text-md font-semibold text-gray-700 mb-3 text-blue-600">一、全年一次性奖金单独计税税率表</h4>
                    <table class="tax-table">
                        <thead>
                            <tr>
                                <th>级数</th>
                                <th>全年一次性奖金应纳税所得额</th>
                                <th>税率（%）</th>
                                <th>速算扣除数（元）</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1</td><td>不超过36000元的部分</td><td>3</td><td>0</td></tr>
                            <tr><td>2</td><td>超过36000元至144000元的部分</td><td>10</td><td>210</td></tr>
                            <tr><td>3</td><td>超过144000元至300000元的部分</td><td>20</td><td>1410</td></tr>
                            <tr><td>4</td><td>超过300000元至420000元的部分</td><td>25</td><td>2660</td></tr>
                            <tr><td>5</td><td>超过420000元至660000元的部分</td><td>30</td><td>4410</td></tr>
                            <tr><td>6</td><td>超过660000元至960000元的部分</td><td>35</td><td>7160</td></tr>
                            <tr><td>7</td><td>超过960000元的部分</td><td>45</td><td>15160</td></tr>
                        </tbody>
                    </table>
                    <p class="text-xs text-gray-500 mt-2">计税公式：应纳税额 = 全年一次性奖金收入 × 适用税率 - 速算扣除数</p>
                </div>
                
                <!-- 综合所得税率表 -->
                <div>
                    <h4 class="text-md font-semibold text-gray-700 mb-3 text-blue-600">二、综合所得税率表（工资薪金等适用）</h4>
                    <table class="tax-table">
                        <thead>
                            <tr>
                                <th>级数</th>
                                <th>全年应纳税所得额</th>
                                <th>税率（%）</th>
                                <th>速算扣除数（元）</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1</td><td>不超过36000元的部分</td><td>3</td><td>0</td></tr>
                            <tr><td>2</td><td>超过36000元至144000元的部分</td><td>10</td><td>2520</td></tr>
                            <tr><td>3</td><td>超过144000元至300000元的部分</td><td>20</td><td>16920</td></tr>
                            <tr><td>4</td><td>超过300000元至420000元的部分</td><td>25</td><td>31920</td></tr>
                            <tr><td>5</td><td>超过420000元至660000元的部分</td><td>30</td><td>52920</td></tr>
                            <tr><td>6</td><td>超过660000元至960000元的部分</td><td>35</td><td>85920</td></tr>
                            <tr><td>7</td><td>超过960000元的部分</td><td>45</td><td>181920</td></tr>
                        </tbody>
                    </table>
                    <p class="text-xs text-gray-500 mt-2">计税公式：应纳税额 = 全年应纳税所得额 × 适用税率 - 速算扣除数</p>
                    <p class="text-xs text-gray-500">全年应纳税所得额 = 全年收入总额 - 基本减除费用（6万元）- 专项扣除 - 专项附加扣除 - 其他扣除</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        // 监听工资津贴、已提取奖金和待提取奖金输入，自动计算总收入
        document.getElementById('salaryAllowance').addEventListener('input', updateTotalIncome);
        document.getElementById('extractedBonus').addEventListener('input', updateTotalIncome);
        document.getElementById('totalBonus').addEventListener('input', updateTotalIncome);
        
        function updateTotalIncome() {
            const salaryAllowance = parseFloat(document.getElementById('salaryAllowance').value) || 0;
            const extractedBonus = parseFloat(document.getElementById('extractedBonus').value) || 0;
            const totalBonus = parseFloat(document.getElementById('totalBonus').value) || 0;
            const totalIncome = salaryAllowance + extractedBonus + totalBonus;
            document.getElementById('totalIncome').value = totalIncome.toFixed(0);
        }
        
        // 新增：获取奖金对应的税率和速算扣除数（按全年金额计算）
        function getBonusTaxParams(bonus) {
            if (bonus <= 0) return { rate: 0, deduction: 0 };
            if (bonus <= 36000) return { rate: 3, deduction: 0 };
            if (bonus <= 144000) return { rate: 10, deduction: 210 };
            if (bonus <= 300000) return { rate: 20, deduction: 1410 };
            if (bonus <= 420000) return { rate: 25, deduction: 2660 };
            if (bonus <= 660000) return { rate: 30, deduction: 4410 };
            if (bonus <= 960000) return { rate: 35, deduction: 7160 };
            return { rate: 45, deduction: 15160 };
        }
        
        // 新增：获取综合所得对应的税率
        function getIncomeTaxRate(income) {
            if (income <= 0) return 0;
            if (income <= 36000) return 3;
            if (income <= 144000) return 10;
            if (income <= 300000) return 20;
            if (income <= 420000) return 25;
            if (income <= 660000) return 30;
            if (income <= 960000) return 35;
            return 45;
        }
        
        function calculateOptimalSplit() {
            // 获取输入值
            const salaryAllowance = parseFloat(document.getElementById('salaryAllowance').value) || 0;
            const extractedBonus = parseFloat(document.getElementById('extractedBonus').value) || 0;
            const totalBonus = parseFloat(document.getElementById('totalBonus').value) || 0;
            const totalIncome = salaryAllowance + extractedBonus + totalBonus;
            const basicDeduction = parseFloat(document.getElementById('basicDeduction').value) || 0;
            const specialDeduction = parseFloat(document.getElementById('specialDeduction').value) || 0;
            const additionalDeduction = parseFloat(document.getElementById('additionalDeduction').value) || 0;
            const otherDeduction = parseFloat(document.getElementById('otherDeduction').value) || 0;
            
            // 计算工资部分（总收入-奖金）
            const salary = salaryAllowance;
            // 计算应纳税所得额（不含奖金）
            const taxableIncomeWithoutBonus = salary + extractedBonus - basicDeduction - specialDeduction - additionalDeduction - otherDeduction;
            // 初始化最优方案
            let optimalBonus = 0;
            let minTotalTax = Infinity;
            let optimalBonusRate = 0;
            let optimalBonusDeduction = 0;
            
            // 测试不同奖金分配方案（从0到totalBonus，步长1000元）
            for (let bonus = 0; bonus <= totalBonus; bonus += 1000) {
                const salaryBonus = totalBonus - bonus;
                // 计算奖金单独计税税额（按全年金额直接计算）
                const bonusTax = calculateBonusTaxSeparate(bonus);
                // 计算合并部分的税额
                const combinedTaxableIncome = taxableIncomeWithoutBonus + salaryBonus;
                const combinedTax = calculateIncomeTax(combinedTaxableIncome);
                // 计算工资部分税额（不含奖金）
                const salaryTax = calculateIncomeTax(taxableIncomeWithoutBonus);
                // 计算总税额
                const totalTax = bonusTax + combinedTax - salaryTax;
                // 更新最优方案
                if (totalTax < minTotalTax) {
                    minTotalTax = totalTax;
                    optimalBonus = bonus;
                    // 记录最优方案的税率参数
                    const bonusParams = getBonusTaxParams(bonus);
                    optimalBonusRate = bonusParams.rate;
                    optimalBonusDeduction = bonusParams.deduction;
                }
            }
            
            // 计算最优方案详情
            const optimalSalaryBonus = totalBonus - optimalBonus;
            const optimalBonusTax = calculateBonusTaxSeparate(optimalBonus);
            const optimalCombinedTaxableIncome = taxableIncomeWithoutBonus + optimalSalaryBonus;
            const optimalCombinedTax = calculateIncomeTax(optimalCombinedTaxableIncome);
            const originalSalaryTax = calculateIncomeTax(taxableIncomeWithoutBonus);
            const combinedTaxRate = getIncomeTaxRate(optimalCombinedTaxableIncome);
            
            // 计算比较方案
            const allSeparateTax = calculateBonusTaxSeparate(totalBonus) + originalSalaryTax;
            const allCombinedTax = calculateIncomeTax(taxableIncomeWithoutBonus + totalBonus);
            
            // 显示结果
            document.getElementById("optimalBonus").textContent = optimalBonus.toFixed(2);
            document.getElementById("optimalSalaryBonus").textContent = optimalSalaryBonus.toFixed(2);
            document.getElementById("bonusTaxRate").textContent = optimalBonusRate + "%";
            document.getElementById("bonusTaxDeduction").textContent = optimalBonusDeduction.toFixed(2);
            document.getElementById("bonusTax").textContent = optimalBonusTax.toFixed(2);
            document.getElementById("salaryTaxableIncome").textContent = taxableIncomeWithoutBonus.toFixed(2);
            document.getElementById("combinedTaxRate").textContent = combinedTaxRate + "%";
            document.getElementById("salaryBonusTax").textContent = (optimalCombinedTax - originalSalaryTax).toFixed(2);
            document.getElementById("salaryTaxableIncomeTable").textContent = taxableIncomeWithoutBonus.toFixed(2);
            document.getElementById("totalTaxableIncome").textContent = optimalCombinedTaxableIncome.toFixed(2);
            document.getElementById("salaryTax").textContent = originalSalaryTax.toFixed(2);
            document.getElementById("totalTax").textContent = minTotalTax.toFixed(2);
            document.getElementById("savingSeparate").textContent = (allSeparateTax - minTotalTax).toFixed(2) + " 元";
            document.getElementById("savingCombined").textContent = (allCombinedTax - minTotalTax).toFixed(2) + " 元";
            
            // 生成建议
            let recommendation = "";
            if (optimalBonus === 0) {
                recommendation = "建议：全部奖金随工资提取并入计税最优";
            } else if (optimalSalaryBonus === 0) {
                recommendation = `建议：全部奖金一次性提取单独计税最优（适用税率${optimalBonusRate}%，速算扣除数${optimalBonusDeduction}元）`;
            } else {
                recommendation = `建议：拆分奖金为 <span class="highlight">${optimalBonus.toFixed(2)} 元</span> 一次性提取（税率${optimalBonusRate}%） + <span class="highlight">${optimalSalaryBonus.toFixed(2)} 元</span> 随工资提取（合并后税率${combinedTaxRate}%）`;
            }
            document.getElementById("recommendation").innerHTML = recommendation;
            document.getElementById("explanation").innerHTML = `此方案可实现整体税负最低，比全部单独计税节省 <span class="text-green-600 font-medium">${(allSeparateTax - minTotalTax).toFixed(2)} 元</span>，比全部合并计税节省 <span class="text-green-600 font-medium">${(allCombinedTax - minTotalTax).toFixed(2)} 元</span>`;
            
            document.getElementById("result").classList.remove("hidden");
        }
        
        // 计算年终奖单独计税（按全年金额直接计算，不除以12）
        function calculateBonusTaxSeparate(bonus) {
            if (bonus <= 0) return 0;
            let rate, deduction;
            if (bonus <= 36000) {
                rate = 0.03;
                deduction = 0;
            } else if (bonus <= 144000) {
                rate = 0.1;
                deduction = 210;
            } else if (bonus <= 300000) {
                rate = 0.2;
                deduction = 1410;
            } else if (bonus <= 420000) {
                rate = 0.25;
                deduction = 2660;
            } else if (bonus <= 660000) {
                rate = 0.3;
                deduction = 4410;
            } else if (bonus <= 960000) {
                rate = 0.35;
                deduction = 7160;
            } else {
                rate = 0.45;
                deduction = 15160;
            }
            return bonus * rate - deduction;
        }
        
        // 计算综合所得税
        function calculateIncomeTax(income) {
            if (income <= 0) return 0;
            let rate, deduction;
            if (income <= 36000) {
                rate = 0.03;
                deduction = 0;
            } else if (income <= 144000) {
                rate = 0.1;
                deduction = 2520;
            } else if (income <= 300000) {
                rate = 0.2;
                deduction = 16920;
            } else if (income <= 420000) {
                rate = 0.25;
                deduction = 31920;
            } else if (income <= 660000) {
                rate = 0.3;
                deduction = 52920;
            } else if (income <= 960000) {
                rate = 0.35;
                deduction = 85920;
            } else {
                rate = 0.45;
                deduction = 181920;
            }
            return income * rate - deduction;
        }
    </script>
</body>
</html>